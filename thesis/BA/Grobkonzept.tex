\chapter{Grobkonzept für die Entwicklung des Prototyps}\label{Aufteilung der
Anforderungen auf Sprache und Generator}
\section{Vorgehensmodell}
Das Vorgehensmodell für die Entwicklung des \emph{DSL-Prototyps} ist ein
inkrementelles Modell. Das bedeutet, dass mehrere Iterationen durchlaufen
werden, in denen unterschiedliche Versionen des Prototyps entwickelt werden
\vcite{SauerDiss}{5}.
In Abbildung \ref{Abb_inkrement} ist das Vorgehensmodell schematisch dargestellt.
\myBigFigure{inkrement.jpg}{Inkrementelles Modell}{inkrement}
\noindent
Nach der Definition der Anforderungen wird der
Prototyp für die aktuelle Iteration entworfen und entwickelt. Im folgenden
Verlauf werden diese beiden Phasen nicht separiert. An die
Implementierung des Prototyps der aktuellen Iteration
schließt sich ein Review an. Innerhalb des Reviews wird der Prototyp der
aktuellen Iteration vorgestellt und weitere Anforderungen festgelegt,
bestehende Anforderungen geändert oder Änderungen am gesamten Konzept
vorgenommen.
Das führt wiederum zu einem neuen Entwurf, woran sich eine weitere
Implementierung anschließt. Dieser Zyklus wird somit mehrmals durchlaufen
(Iteration) \vcite{SauerDiss}{5}. \\ 
Grund für dieses Vorgehen ist, dass in der \deg bzgl.
\emph{DSL-Entwicklung} wenig Know-How existiert. Aus den Iterationen soll so
viel Erfahrung und Wissen wie möglich geschöpft werden. Zudem werden somit auch
Irrwege aufgezeigt, die bei der Entwicklung anderer \emph{DSLs} umgangen werden
können.
Weiterhin können Anforderungen flexibel angepasst und Missverständnisse
vermieden werden, da der Entwicklungsprozess transparent ist.
\vcite{SauerDiss}{67}\\
Im weiteren Verlauf (Kapitel \ref{Grobkonzept}, \ref{Entwicklung einer DSL zur
Beschreibung der GUI in profil c/s} und \ref{Entwicklung des Generators für das
Generieren von Klassen für das Multichannel-Framework}) werden die
durchgeführten Iterationen beschrieben. Dabei werden folgende Aspekte
beleuchtet:
\begin{itemize}
  \item \textbf{Vision} (siehe Kapitel \ref{Grobkonzept})\\
  Anhand der Vision werden die Anforderungen an die \gloss{DSL-Umgebung}
  beschrieben. Die in Kapitel \ref{GUI-DSL} vorgestellten Anforderungen sind das
  Resultat der in dieser Arbeit durchgeführten Iterationen.
  \item \textbf{Entwicklung}\\
  Die Entwicklung beschreibt die Phasen \emph{Entwerfen} und
  \emph{Implementieren}. 
  Sie teilt sich in zwei weitere Bereiche auf:
  \begin{itemize}
  	\item Entwicklung der \emph{DSL} (siehe Kapitel \ref{Entwicklung einer
  	DSL zur Beschreibung der GUI in profil c/s})
  	\item Entwicklung eines Generators (siehe Kapitel \ref{Entwicklung
  	des Generators für das Generieren von Klassen für das Multichannel-Framework})
  \end{itemize}
\end{itemize}


\section{Konzeption der DSL-Umgebung (Vision)}\label{Grobkonzept}
\subsection{1. Iteration}
Die \gloss{DSL-Umgebung} soll sich in zwei Bereiche unterteilen. 
\begin{itemize}
  \item \emph{DSL} zur Beschreibung der \gui
  \item \emph{Generator} zur Generierung von Quellcodes
\end{itemize}
In Abbildung \ref{Abb_Konzept_1} sind die Artefakte mit den
Funktionen (blauer Kasten), die von ihnen umgesetzt werden sollen, dargestellt.
\myBigFigure{konzept_1.jpg}{1. Iteration: Konzeption der \gloss{DSL-Umgebung}}{Konzept_1}
\noindent
Die elementare Aufgabe der \g ist es, die
\gks, die auf der Benutzeroberfläche verwendet werden sollen, zu
definieren (siehe Anforderung \emph{\hyperref[AS1]{AS1}}). Ausgehend von den für
\pcs verwendeten \emph{GUI-Kompo\-nenten}, können diese in drei Kategorien
unterteilt werden:
\begin{itemize}
  \item \textbf{Basiskomponenten}\\
  Dabei handelt
es sich um \emph{GUI-Komponenten}, deren Funktionen in unterschiedlichen
\emph{GUI-Frameworks} ähnlich sind und in unterschiedlichen Anwendungen
eingesetzt werden können. Das bedeutet, dass sie nicht als domänenspezifisch angesehen werden
können. Beispiele hierfür sind \emph{GUI-Komponenten} wie der \emph{Button} oder
das \emph{Label}.
  \item\textbf{Komplexe Komponenten}\\
  Diese beschreiben domänenspezifische \gks, welche speziell für \pcs
entwickelt wurden. Interaktionen und Funktionalitäten wurden bereits festgelegt und können nicht verändert werden.
Ein Beispiel für eine komplexe Komponente ist die
\gloss{Multiselection-Komponente}, welche in Abbildung \ref{Abb_msk} in Anhang
\ref{zuwendungsblatt} dargestellt ist.

  \item\textbf{Layoutkomponenten}\\
  Dabei handelt es sich
um Komponenten, welche die Struktur der \gui bestimmen. In anderen
\emph{GUI-Frameworks} sind dies bspw.
\emph{Panel} (\gloss{Swing}), \emph{Div} (\emph{HTML}) oder \emph{Pane}
(\emph{JavaFX}).
\end{itemize}
\noindent
Bei den Beschreibungen der \Ks muss auch die Möglichkeit bestehen Interaktionen
festzulegen (siehe Anforderung \emph{\hyperref[AS5]{AS5}}). Zu diesen
festgelegten Interaktionen gehören eine entsprechende Form und
bestimmte Aktionen, die ausgeführt werden müssen. Die anderen \gks haben
entweder feste (\emph{komplexe Komponenten}) oder gar keine
(\emph{Layoutkomponenten}) Interaktionsmöglichkeiten.\\
Bei der Entwicklung der \knks ist darauf zu achten, dass sie für jedes
verwendete \emph{GUI-Framework} implementiert werden müssen. Damit wird
verhindert, dass die Entwickler, die mit der \g arbeiten,
eigene \kks entwerfen, deren Wiederverwendungsgrad niedriger ist. Solche
Komponenten sollten nur nach ausreichender Evaluation an einer zentralen Stelle
implementiert und bereitgestellt werden. Die Notwendigkeit, dass die Quellcodes
für diese \knks sowohl zur Entwicklungszeit als auch zur Laufzeit vorhanden sein müssen, ist ein Nachteil dieses Konzepts.\\
Bei den \emph{Layoutkomponenten} ist besonders
auf die Ausdruckskraft der für die Beschreibung dieser Komponenten verwendeten Bezeichnungen zu
achten. Grund dafür ist, dass die \gui auf unterschiedlichen
Plattformen abgebildet werden soll, die spezielle Layoutmanager unterstützen.
Ein Programmfenster auf dem Desktop lässt sich Beispielsweise als oberste
Layoutkomponente festlegen. In der \deg ist in einem Web-Browser der
Begriff \emph{Programmfenster} als oberste \emph{Layoutkomponenten} nicht
geläufig.
Dieses \emph{Programmfester} auf dem Desktop wird in der \deg mit dem Browsertab
assoziiert.\\
Darüber hinaus sollen die Skripte für die Beschreibung der \guis so
konzipiert werden, dass es möglich ist, andere \emph{GUI-Beschreibungen} dort
einzubinden (siehe Anforderung \emph{\hyperref[AS1]{AS1}}). Somit werden
eingebundene \guis wiederum zu \emph{GUI-Komponenten}.
Ziel dessen ist es, dass die Entwickler aus mehreren einfachen \guis eine
komplexe \gui erstellen können (Modularisierung). Die Gefahr die dabei besteht,
ist, dass mit der Zeit viele einfache \emph{GUI-Beschreibungen} mit ähnlicher
Struktur entwickelt werden. Weiterhin verfolgt die \deg bei den \guis von \pcs
ein bestimmtes Schema (\emph{Cooperate Design}), welches durch die
Modularisierung untersützt wird. Hierbei ist es wichtigzu betonen, dass
die \emph{DSL} keine Sprache sein soll, mit der jede \gui beschrieben werden
kann, sondern lediglich \guis für \emph{profil c/s}. Der Vorteil, der 
sich aus dieser starken Modularisierung ergibt, ist, dass viele
\emph{GUI-Beschreibungen} wiederverwendet werden können. So ist es möglich,
komplexe \emph{GUI-Beschreibungen} zu entwickeln, die in Fachabteilungen mit
fachlichen Konzepten assoziiert werden können.\\\\
\noindent
Suchmasken können bspw. nach diesem Konzept gestaltet, beliebig
wiederverwendet und kombiniert werden. Hierzu werden unterschiedliche
Suchfelder definiert, die aus einem \emph{Label} und einem \emph{Textfeld}
bestehen (Beispiel siehe Abbildung \ref{Abb_suchfeld}).
\myBigFigure{suchfeld.jpg}{Beispiel: Suchfeld für Name}{suchfeld}
\noindent
In einer Suchmaske können mehrere dieser Suchfelder beliebig kombiniert werden
(Beispiel siehe Abbildung \ref{Abb_suchmaske}).
\myBigFigure{suchmaske.jpg}{Beispiel: Suchmaske}{suchmaske}
\noindent
Durch diese Möglichkeit der Kombination können auch komplexere fachliche
Konzepte auf die \gui bezogen werden, wie z.B.
\emph{Personensuche}.\\\\
Um die miteinander kombinierten \gks zu
strukturieren, ist es notwendig, dass die \g Informationen über
die Anordnung der \gks enthält. Diese Informationen müssen
ausreichend abstrakt sein, damit sich diese Struktur auf unterschiedliche
\emph{GUI-Frameworks} beziehen lässt. Dazu wird die Struktur innerhalb einer
\gui als Anordnung von Bereichen betrachtet. In der \g
werden diesen Bereichen die \gks zugeordnet. Genauere Informationen über die
Anordnung dieser Bereiche dürfen nicht enthalten sein, da dies zu einer
Orientierung an ein bestimmtes Layout führen würde (siehe Anforderung
\emph{\hyperref[AS3]{AS3}}).
Zudem ist weiterhin wichtig, dass den Bereichen jeweils nur eine Komponente
zugeordnet werden kann, wodurchder Zwang zur vorher beschriebenen
Kombination von eingebundenen \emph{GUI-Skripten} und definierten \gks verstärkt
wird.\\
Der \emph{Generator} übernimmt beim Erzeugen des frameworkspezifischen
Quellcodes die konkrete Anordnung der beschriebenen Bereiche. Grund dafür ist, dass die
Anordnung der Komponenten frameworkspezifisch ist und teilweise unterschiedliche
Layoutmanager in unterschiedlichen Frameworks unterstützt werden. Da für jedes
eingesetzte Framework ein eigener Generator implementiert werden muss (siehe
Kapitel \ref{Entwicklung einer Lösungsidee}), ist es theoretisch möglich diese
Aufgabe weitgehend unabhängig von der Beschreibung der verwendeten
\gui-Komponen\-ten zu erfüllen.


\subsection{2. Iteration}
Das grundsätzliche Konzept muss in dieser Iteration um ein Artefakt erweitert
werden (siehe Abbildung \ref{Abb_konzept_2}).\\
Eine Änderung, die in dieser Grafik nicht dargestellt wird, ist, dass die
Aktionen, die bei Interaktionen mit \gks ausgeführt werden,
nicht in der \emph{GUI-DSL} definiert werden sollen. Dies liegt an der starken
Variation der Aktionen, wodurch diese kaum abstrahiert werden können.\\
\myBigFigure{konzept_2.jpg}{2. Iteration: Konzeption der DSL-Umgebung}{konzept_2}
\noindent
Eine weitere Änderung ist, dass die \gks, die in einem
\emph{GUI-Skript} direkt definiert werden, in einer anderen Beschreibungen
verändert werden können. Die Voraussetzung dafür ist, dass dieses
\emph{GUI-Skript} in die andere Beschreibung eingebunden ist. Dadurch können die
wiederverwendeten Komponenten angepasst werden, was die Flexibilität steigert
(siehe Anforderung \emph{\hyperref[AS2]{AS2}}).\\
Darüber hinaus soll die Möglichkeit bestehen, bestimmte Werte, welche die
Attribute von \gks annehmen können, in \emph{Properties-Dateien}
auszulagern, wodurch die \emph{GUI-DSL} weitestgehend entlastet wird. Allerdings
muss für die Zuweisung von \gks zu Wertbeschreibungen in der
\emph{Properties-Datei} und dem \emph{GUI-Skript} ein eindeutiger Schlüssel definiert werden.\\
Der \emph{Generator} muss die festgelegten \emph{Properties-Dateien} in die
Generierung mit einbeziehen und ihnen die entsprechenden Werte entnehmen. Dabei gilt, dass
nicht mehr nach einem bestimmten Attribut einer Komponente in der
\emph{Properties-Datei} gesucht wird, wenn diesem
Attribut innerhalb des \emph{GUI-Skripts} ein bestimmter Wert zugewiesen
wurde.

\subsection{3. Iteration}
Das grundsätzliche Konzept wird in dieser Iteration nochmals erweitert.
Neben den bekannten Artefakten der \gloss{DSL-Umgebung} kommt ein weiteres
Artefakt hinzu, durch welches das Layout beschrieben werden soll.
Das führt dazu, dass die Beschreibung des Layouts nicht mehr im Generator
stattfindet, sondern nur noch frameworkspezifisch generiert werden muss. In Abbildung
\ref{Abb_konzept_3} ist das neue Konzept schematisch dargestellt.
\myBigFigure{konzept_3.jpg}{3. Iteration: Konzeption der DSL-Umgebung}{konzept_3}
\noindent
Da die Layoutbeschreibung in eine separate Datei ausgeglagert wird, müssen die
\gks aus dem \emph{GUI-Skript} mit den Festlegungen in der \emph{Layout-Datei}
referenziert werden können.\\
Bezogen auf die im \emph{GUI-Skript} definierten Bereiche ist aufgefallen,
dass die Angabe der Anzahl der Bereiche nicht notwendig ist, da dieser Wert
doppelt definiert weden würde. Zum einen würde dies direkt in der Angabe der
Anzahl festgelegt werden und andererseits indirekt durch die Zuweisung der \gks
zu den Bereichen. Auf Basis dieser doppelten Angabe sollten
ursprünglich Validierungen ausgeführt werden.
Dies widerspricht jedoch der Anforderung, dass so wenig
Codezeilen wie möglich geschrieben werden sollen, um eine \gui zu
beschreiben (siehe Anforderung \emph{\hyperref[AS4]{AS4}}).\\
Weiterhin ist aufgefallen, dass in einem \emph{GUI-Skript} nur eine
\emph{Properties-Datei} angegeben werden kann, wohingegen in den
\emph{GUI-Klassen} der \deg jedoch mehrere dieser Dateien festgelegt werden
können. Dies ist auch in der \emph{GUI-DSL} zu beachten.\\
Neben den Komponenten \emph{Button} und \emph{Label} müssen folgende weitere
\Ks definiert werden können:
\begin{itemize}
  \item \textbf{Textfield}\\
  Ein Feld, in dem ein einzeiliger Text editiert werden kann.
  \item \textbf{Textarea}\\
  Ein Feld, in dem ein mehrzeiliger Text editiert werden kann.
  \item \textbf{Tree}\\
  Eine Baumstruktur, in der mehrere Elemente eingebunden werden können.
  \item \textbf{Table}\\
  Eine Tabellenstruktur, in der mehrere Elemente eingebunden werden können.
  \item \textbf{TabView}\\
  Eine Ansicht, in der aus mehreren Taben ein Tab visualisiert werden
  kann.
  \item \textbf{Interchangeable}\\
  Ein Bereich, in dem während der Laufzeit unterschiedliche \guis
  eingebunden werden können.
\end{itemize}
Weiterhin müssen die Bezeichnungen der
Interaktionstypen an die Bezeichnungen der \emph{Interaktionsformen (IF)} der
\deg angepasst werden. Darüber hinaus sollen folgenden Standardinteraktionen
für entsprechende \gks verwendet werden, die für die Umsetzung des Prototyps
notwendig sind.
\begin{itemize}
  \item \textbf{Label:} \emph{IfTextDisplay}
  \item \textbf{Tree:} \emph{IfTree}, \emph{IfActivator}
\end{itemize}
Diese Standardinteraktionstypen müssen nicht in den jeweiligen Komponenten
definiert werden.
